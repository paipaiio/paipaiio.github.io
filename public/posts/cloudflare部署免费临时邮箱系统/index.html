<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Cloudflareéƒ¨ç½²å…è´¹ä¸´æ—¶é‚®ç®±ç³»ç»Ÿ | paipaiâ€™s blog</title><meta name=keywords content="æŠ€æœ¯åˆ†äº«,ç™½å«–,Cloudflare"><meta name=description content="
é¡¹ç›®åŸåœ°å€ï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email
æ¼”ç¤ºåœ°å€ï¼štm.b4.hk


[!NOTE]
äº‹å…ˆå‡†å¤‡å†…å®¹ï¼š


ä¸€ä¸ªcloudflareè´¦æˆ·


ä¸¤ä¸ªåŸŸåï¼Œåˆ†åˆ«å¯¹åº”
å‰ç«¯: tm.b4.hk
åç«¯: tmapi.b4.hk



D1æ•°æ®åº“é…ç½®

æ‰“å¼€Cloudflareä¸»é¡µ



é€‰æ‹©å·¦è¾¹ä¾§æ çš„Workerså’ŒPagesï¼Œç‚¹è¿›å»



é€‰æ‹©å·¦è¾¹ä¾§æ çš„D1ï¼Œç‚¹è¿›å»




åˆ›å»ºæ•°æ®åº“ï¼Œé€‰æ‹©ä»ªè¡¨ç›˜ï¼Œåå­—å¡«dev,ç„¶åç‚¹å‡»åˆ›å»º



é€‰æ‹©æ§åˆ¶å°



åœ¨å‘½ä»¤è¡Œå¤„è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡Œï¼Œå‡ºç°ä¸€ä¸‹æç¤ºè¯´æ˜å·²ç»å®Œæˆ
CREATE TABLE IF NOT EXISTS raw_mails (
    id INTEGER PRIMARY KEY,
    message_id TEXT,
    source TEXT,
    address TEXT,
    raw TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_raw_mails_address ON raw_mails(address);

CREATE TABLE IF NOT EXISTS address (
    id INTEGER PRIMARY KEY,
    name TEXT UNIQUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_address_name ON address(name);

CREATE TABLE IF NOT EXISTS auto_reply_mails (
    id INTEGER PRIMARY KEY,
    source_prefix TEXT,
    name TEXT,
    address TEXT UNIQUE,
    subject TEXT,
    message TEXT,
    enabled INTEGER DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_auto_reply_mails_address ON auto_reply_mails(address);

CREATE TABLE IF NOT EXISTS address_sender (
    id INTEGER PRIMARY KEY,
    address TEXT UNIQUE,
    balance INTEGER DEFAULT 0,
    enabled INTEGER DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_address_sender_address ON address_sender(address);

CREATE TABLE IF NOT EXISTS sendbox (
    id INTEGER PRIMARY KEY,
    address TEXT,
    raw TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_sendbox_address ON sendbox(address);

CREATE TABLE IF NOT EXISTS settings (
    key TEXT PRIMARY KEY,
    value TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY,
    user_email TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    user_info TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_users_user_email ON users(user_email);

CREATE TABLE IF NOT EXISTS users_address (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    address_id INTEGER UNIQUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_users_address_user_id ON users_address(user_id);

CREATE INDEX IF NOT EXISTS idx_users_address_address_id ON users_address(address_id);

CREATE TABLE IF NOT EXISTS user_roles (
    id INTEGER PRIMARY KEY,
    user_id INTEGER UNIQUE NOT NULL,
    role_text TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_user_roles_user_id ON user_roles(user_id);
æŒ‡ä»¤æ¥æºï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email/blob/main/db/schema.sql"><meta name=author content="MuskZhou"><link rel=canonical href=https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.paipaiio.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.paipaiio.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.paipaiio.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.paipaiio.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.paipaiio.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/"><meta property="og:site_name" content="paipaiâ€™s blog"><meta property="og:title" content="Cloudflareéƒ¨ç½²å…è´¹ä¸´æ—¶é‚®ç®±ç³»ç»Ÿ"><meta property="og:description" content=" é¡¹ç›®åŸåœ°å€ï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email
æ¼”ç¤ºåœ°å€ï¼štm.b4.hk
[!NOTE]
äº‹å…ˆå‡†å¤‡å†…å®¹ï¼š
ä¸€ä¸ªcloudflareè´¦æˆ·
ä¸¤ä¸ªåŸŸåï¼Œåˆ†åˆ«å¯¹åº”
å‰ç«¯: tm.b4.hk
åç«¯: tmapi.b4.hk
D1æ•°æ®åº“é…ç½® æ‰“å¼€Cloudflareä¸»é¡µ é€‰æ‹©å·¦è¾¹ä¾§æ çš„Workerså’ŒPagesï¼Œç‚¹è¿›å» é€‰æ‹©å·¦è¾¹ä¾§æ çš„D1ï¼Œç‚¹è¿›å» åˆ›å»ºæ•°æ®åº“ï¼Œé€‰æ‹©ä»ªè¡¨ç›˜ï¼Œåå­—å¡«dev,ç„¶åç‚¹å‡»åˆ›å»º
é€‰æ‹©æ§åˆ¶å°
åœ¨å‘½ä»¤è¡Œå¤„è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡Œï¼Œå‡ºç°ä¸€ä¸‹æç¤ºè¯´æ˜å·²ç»å®Œæˆ
CREATE TABLE IF NOT EXISTS raw_mails ( id INTEGER PRIMARY KEY, message_id TEXT, source TEXT, address TEXT, raw TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_raw_mails_address ON raw_mails(address); CREATE TABLE IF NOT EXISTS address ( id INTEGER PRIMARY KEY, name TEXT UNIQUE, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_address_name ON address(name); CREATE TABLE IF NOT EXISTS auto_reply_mails ( id INTEGER PRIMARY KEY, source_prefix TEXT, name TEXT, address TEXT UNIQUE, subject TEXT, message TEXT, enabled INTEGER DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_auto_reply_mails_address ON auto_reply_mails(address); CREATE TABLE IF NOT EXISTS address_sender ( id INTEGER PRIMARY KEY, address TEXT UNIQUE, balance INTEGER DEFAULT 0, enabled INTEGER DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_address_sender_address ON address_sender(address); CREATE TABLE IF NOT EXISTS sendbox ( id INTEGER PRIMARY KEY, address TEXT, raw TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_sendbox_address ON sendbox(address); CREATE TABLE IF NOT EXISTS settings ( key TEXT PRIMARY KEY, value TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY, user_email TEXT UNIQUE NOT NULL, password TEXT NOT NULL, user_info TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_users_user_email ON users(user_email); CREATE TABLE IF NOT EXISTS users_address ( id INTEGER PRIMARY KEY, user_id INTEGER, address_id INTEGER UNIQUE, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_users_address_user_id ON users_address(user_id); CREATE INDEX IF NOT EXISTS idx_users_address_address_id ON users_address(address_id); CREATE TABLE IF NOT EXISTS user_roles ( id INTEGER PRIMARY KEY, user_id INTEGER UNIQUE NOT NULL, role_text TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_user_roles_user_id ON user_roles(user_id); æŒ‡ä»¤æ¥æºï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email/blob/main/db/schema.sql"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-08-05T16:36:00+00:00"><meta property="article:modified_time" content="2024-08-05T16:36:00+00:00"><meta property="article:tag" content="æŠ€æœ¯åˆ†äº«"><meta property="article:tag" content="ç™½å«–"><meta property="article:tag" content="Cloudflare"><meta property="og:image" content="https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/Cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/Cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F.png"><meta name=twitter:title content="Cloudflareéƒ¨ç½²å…è´¹ä¸´æ—¶é‚®ç®±ç³»ç»Ÿ"><meta name=twitter:description content="
é¡¹ç›®åŸåœ°å€ï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email
æ¼”ç¤ºåœ°å€ï¼štm.b4.hk


[!NOTE]
äº‹å…ˆå‡†å¤‡å†…å®¹ï¼š


ä¸€ä¸ªcloudflareè´¦æˆ·


ä¸¤ä¸ªåŸŸåï¼Œåˆ†åˆ«å¯¹åº”
å‰ç«¯: tm.b4.hk
åç«¯: tmapi.b4.hk



D1æ•°æ®åº“é…ç½®

æ‰“å¼€Cloudflareä¸»é¡µ



é€‰æ‹©å·¦è¾¹ä¾§æ çš„Workerså’ŒPagesï¼Œç‚¹è¿›å»



é€‰æ‹©å·¦è¾¹ä¾§æ çš„D1ï¼Œç‚¹è¿›å»




åˆ›å»ºæ•°æ®åº“ï¼Œé€‰æ‹©ä»ªè¡¨ç›˜ï¼Œåå­—å¡«dev,ç„¶åç‚¹å‡»åˆ›å»º



é€‰æ‹©æ§åˆ¶å°



åœ¨å‘½ä»¤è¡Œå¤„è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡Œï¼Œå‡ºç°ä¸€ä¸‹æç¤ºè¯´æ˜å·²ç»å®Œæˆ
CREATE TABLE IF NOT EXISTS raw_mails (
    id INTEGER PRIMARY KEY,
    message_id TEXT,
    source TEXT,
    address TEXT,
    raw TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_raw_mails_address ON raw_mails(address);

CREATE TABLE IF NOT EXISTS address (
    id INTEGER PRIMARY KEY,
    name TEXT UNIQUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_address_name ON address(name);

CREATE TABLE IF NOT EXISTS auto_reply_mails (
    id INTEGER PRIMARY KEY,
    source_prefix TEXT,
    name TEXT,
    address TEXT UNIQUE,
    subject TEXT,
    message TEXT,
    enabled INTEGER DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_auto_reply_mails_address ON auto_reply_mails(address);

CREATE TABLE IF NOT EXISTS address_sender (
    id INTEGER PRIMARY KEY,
    address TEXT UNIQUE,
    balance INTEGER DEFAULT 0,
    enabled INTEGER DEFAULT 1,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_address_sender_address ON address_sender(address);

CREATE TABLE IF NOT EXISTS sendbox (
    id INTEGER PRIMARY KEY,
    address TEXT,
    raw TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_sendbox_address ON sendbox(address);

CREATE TABLE IF NOT EXISTS settings (
    key TEXT PRIMARY KEY,
    value TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY,
    user_email TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    user_info TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_users_user_email ON users(user_email);

CREATE TABLE IF NOT EXISTS users_address (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    address_id INTEGER UNIQUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_users_address_user_id ON users_address(user_id);

CREATE INDEX IF NOT EXISTS idx_users_address_address_id ON users_address(address_id);

CREATE TABLE IF NOT EXISTS user_roles (
    id INTEGER PRIMARY KEY,
    user_id INTEGER UNIQUE NOT NULL,
    role_text TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_user_roles_user_id ON user_roles(user_id);
æŒ‡ä»¤æ¥æºï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email/blob/main/db/schema.sql"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.paipaiio.com/posts/"},{"@type":"ListItem","position":2,"name":"Cloudflareéƒ¨ç½²å…è´¹ä¸´æ—¶é‚®ç®±ç³»ç»Ÿ","item":"https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Cloudflareéƒ¨ç½²å…è´¹ä¸´æ—¶é‚®ç®±ç³»ç»Ÿ","name":"Cloudflareéƒ¨ç½²å…è´¹ä¸´æ—¶é‚®ç®±ç³»ç»Ÿ","description":" é¡¹ç›®åŸåœ°å€ï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email\næ¼”ç¤ºåœ°å€ï¼štm.b4.hk\n[!NOTE]\näº‹å…ˆå‡†å¤‡å†…å®¹ï¼š\nä¸€ä¸ªcloudflareè´¦æˆ·\nä¸¤ä¸ªåŸŸåï¼Œåˆ†åˆ«å¯¹åº”\nå‰ç«¯: tm.b4.hk\nåç«¯: tmapi.b4.hk\nD1æ•°æ®åº“é…ç½® æ‰“å¼€Cloudflareä¸»é¡µ é€‰æ‹©å·¦è¾¹ä¾§æ çš„Workerså’ŒPagesï¼Œç‚¹è¿›å» é€‰æ‹©å·¦è¾¹ä¾§æ çš„D1ï¼Œç‚¹è¿›å» åˆ›å»ºæ•°æ®åº“ï¼Œé€‰æ‹©ä»ªè¡¨ç›˜ï¼Œåå­—å¡«dev,ç„¶åç‚¹å‡»åˆ›å»º\né€‰æ‹©æ§åˆ¶å°\nåœ¨å‘½ä»¤è¡Œå¤„è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡Œï¼Œå‡ºç°ä¸€ä¸‹æç¤ºè¯´æ˜å·²ç»å®Œæˆ\nCREATE TABLE IF NOT EXISTS raw_mails ( id INTEGER PRIMARY KEY, message_id TEXT, source TEXT, address TEXT, raw TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_raw_mails_address ON raw_mails(address); CREATE TABLE IF NOT EXISTS address ( id INTEGER PRIMARY KEY, name TEXT UNIQUE, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_address_name ON address(name); CREATE TABLE IF NOT EXISTS auto_reply_mails ( id INTEGER PRIMARY KEY, source_prefix TEXT, name TEXT, address TEXT UNIQUE, subject TEXT, message TEXT, enabled INTEGER DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_auto_reply_mails_address ON auto_reply_mails(address); CREATE TABLE IF NOT EXISTS address_sender ( id INTEGER PRIMARY KEY, address TEXT UNIQUE, balance INTEGER DEFAULT 0, enabled INTEGER DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_address_sender_address ON address_sender(address); CREATE TABLE IF NOT EXISTS sendbox ( id INTEGER PRIMARY KEY, address TEXT, raw TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_sendbox_address ON sendbox(address); CREATE TABLE IF NOT EXISTS settings ( key TEXT PRIMARY KEY, value TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY, user_email TEXT UNIQUE NOT NULL, password TEXT NOT NULL, user_info TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_users_user_email ON users(user_email); CREATE TABLE IF NOT EXISTS users_address ( id INTEGER PRIMARY KEY, user_id INTEGER, address_id INTEGER UNIQUE, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_users_address_user_id ON users_address(user_id); CREATE INDEX IF NOT EXISTS idx_users_address_address_id ON users_address(address_id); CREATE TABLE IF NOT EXISTS user_roles ( id INTEGER PRIMARY KEY, user_id INTEGER UNIQUE NOT NULL, role_text TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_user_roles_user_id ON user_roles(user_id); æŒ‡ä»¤æ¥æºï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email/blob/main/db/schema.sql\n","keywords":["æŠ€æœ¯åˆ†äº«","ç™½å«–","Cloudflare"],"articleBody":" é¡¹ç›®åŸåœ°å€ï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email\næ¼”ç¤ºåœ°å€ï¼štm.b4.hk\n[!NOTE]\näº‹å…ˆå‡†å¤‡å†…å®¹ï¼š\nä¸€ä¸ªcloudflareè´¦æˆ·\nä¸¤ä¸ªåŸŸåï¼Œåˆ†åˆ«å¯¹åº”\nå‰ç«¯: tm.b4.hk\nåç«¯: tmapi.b4.hk\nD1æ•°æ®åº“é…ç½® æ‰“å¼€Cloudflareä¸»é¡µ é€‰æ‹©å·¦è¾¹ä¾§æ çš„Workerså’ŒPagesï¼Œç‚¹è¿›å» é€‰æ‹©å·¦è¾¹ä¾§æ çš„D1ï¼Œç‚¹è¿›å» åˆ›å»ºæ•°æ®åº“ï¼Œé€‰æ‹©ä»ªè¡¨ç›˜ï¼Œåå­—å¡«dev,ç„¶åç‚¹å‡»åˆ›å»º\né€‰æ‹©æ§åˆ¶å°\nåœ¨å‘½ä»¤è¡Œå¤„è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡Œï¼Œå‡ºç°ä¸€ä¸‹æç¤ºè¯´æ˜å·²ç»å®Œæˆ\nCREATE TABLE IF NOT EXISTS raw_mails ( id INTEGER PRIMARY KEY, message_id TEXT, source TEXT, address TEXT, raw TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_raw_mails_address ON raw_mails(address); CREATE TABLE IF NOT EXISTS address ( id INTEGER PRIMARY KEY, name TEXT UNIQUE, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_address_name ON address(name); CREATE TABLE IF NOT EXISTS auto_reply_mails ( id INTEGER PRIMARY KEY, source_prefix TEXT, name TEXT, address TEXT UNIQUE, subject TEXT, message TEXT, enabled INTEGER DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_auto_reply_mails_address ON auto_reply_mails(address); CREATE TABLE IF NOT EXISTS address_sender ( id INTEGER PRIMARY KEY, address TEXT UNIQUE, balance INTEGER DEFAULT 0, enabled INTEGER DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_address_sender_address ON address_sender(address); CREATE TABLE IF NOT EXISTS sendbox ( id INTEGER PRIMARY KEY, address TEXT, raw TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_sendbox_address ON sendbox(address); CREATE TABLE IF NOT EXISTS settings ( key TEXT PRIMARY KEY, value TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY, user_email TEXT UNIQUE NOT NULL, password TEXT NOT NULL, user_info TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_users_user_email ON users(user_email); CREATE TABLE IF NOT EXISTS users_address ( id INTEGER PRIMARY KEY, user_id INTEGER, address_id INTEGER UNIQUE, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_users_address_user_id ON users_address(user_id); CREATE INDEX IF NOT EXISTS idx_users_address_address_id ON users_address(address_id); CREATE TABLE IF NOT EXISTS user_roles ( id INTEGER PRIMARY KEY, user_id INTEGER UNIQUE NOT NULL, role_text TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); CREATE INDEX IF NOT EXISTS idx_user_roles_user_id ON user_roles(user_id); æŒ‡ä»¤æ¥æºï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email/blob/main/db/schema.sql\nè‡³æ­¤D1æ•°æ®åº“é…ç½®å®Œæˆ\nåå°ç¨‹åºéƒ¨ç½² è¿”å›Workerså’Œpagesï¼Œé€‰æ‹©åˆ›å»º\nåˆ›å»ºä¸€ä¸ªWorkersï¼Œç‚¹å‡»åˆ›å»ºä¸€ä¸ªWorkersï¼Œåå­—ä¸ºtmapiï¼Œç„¶åç‚¹å‡»éƒ¨ç½²\nåœ¨æ¦‚è¿°é¡µé¢æ‰¾åˆ°åˆšåˆšåˆ›å»ºçš„Workerï¼Œç‚¹å‡»å³ä¸Šè§’çš„ç¼–è¾‘ä»£ç \nç‚¹å‡»å·¦ä¸Šè§’çš„æ–‡ä»¶å¤¹ç¬¦å·ï¼Œåˆ é™¤worker.js\nä¸‹è½½è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”ä¸Šä¼ ï¼Œå†ç‚¹å‡»å³ä¸Šè§’çš„éƒ¨ç½²\nhttps://github.com/dreamhunter2333/cloudflare_temp_email/releases/latest/download/worker.js å›åˆ°æœ€å¼€å§‹çš„workerç•Œé¢ï¼Œç‚¹å‡»è®¾ç½®ï¼Œé€‰æ‹©å˜é‡ï¼Œæ·»åŠ ä»¥ä¸‹å››ä¸ªå˜é‡ï¼ŒDOMAINSå¡«å†™é¡¶çº§åŸŸåï¼Œç„¶åç‚¹å‡»éƒ¨ç½²\nADMIN_PASSWORDS = [\"1234\"] PASSWORDS = [\"1234\"] DOMAINS = [\"b4.hk\"] JWT_SECRET =[\"xxxyyyzzz\"] å¾€ä¸‹æ»‘åŠ¨ï¼Œç‚¹å‡»ä¸‹æ–¹çš„KV å‘½åç©ºé—´ç»‘å®šï¼Œé€‰æ‹©åˆ›å»ºï¼Œåç§°å¡«å†™ä¸ºtemp_mailï¼Œç‚¹å‡»æ·»åŠ \nè¿”å›Workerï¼Œç»‘å®šåˆšåˆšçš„KVï¼Œå˜é‡åç§°ä¸ºKVï¼Œå‘½åç©ºé—´ä¸ºåˆšåˆšåˆ›å»ºçš„ï¼Œç„¶åéƒ¨ç½²\nç»‘å®šD1æ•°æ®åº“ï¼Œå˜é‡åä¸ºDB\né€‰æ‹©è§¦å‘å™¨ï¼Œæ·»åŠ è‡ªå®šä¹‰åç«¯åŸŸ(tmapi.b4.hk)\nå®‰å…¨æ£€æŸ¥ï¼Œåˆ†åˆ«è®¿é—®tmapi.b4.hkå’Œtmapi.b4.hk/health_checkï¼Œè¿”å›ç»“æ„ä¸ºokåˆ™ä»£è¡¨å®Œæˆã€‚\nå‰ç«¯ç¨‹åºéƒ¨ç½² è¿”å›Workerså’Œpagesç‚¹å‡»åˆ›å»ºï¼Œé€‰æ‹©pages\nç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œæ‰“å¼€ä½œè€…æä¾›çš„åœ°å€ï¼šé…ç½®æ–‡ä»¶ç”Ÿæˆï¼Œåœ¨è¿™é‡Œè¾“å…¥ä½ çš„åç«¯åŸŸåï¼Œç‚¹å‡»ç”Ÿæˆï¼Œç„¶åä¸‹è½½\nè¿”å›åˆšåˆšçš„åˆ›å»ºpagesï¼Œé€‰æ‹©ä¸Šä¼ èµ„äº§ï¼Œå‘½åä¸ºtempmailï¼Œç­‰å¾…å‹ç¼©åŒ…ä¸Šä¼ å®Œæˆï¼Œé€‰æ‹©éƒ¨ç½²ç«™ç‚¹\nè¿›å…¥é¡¹ç›®ï¼Œç‚¹å‡»è‡ªå®šä¹‰åŸŸï¼Œæ·»åŠ è‡ªå·±çš„å‰ç«¯åŸŸ(tm.b4.hk)ï¼Œç‚¹å‡»ç»§ç»­ï¼Œç„¶åæ¿€æ´»åŸŸ\nè®¿é—®å‰ç«¯åŸŸåï¼Œè¾“å…¥å¯†ç 1234ï¼Œå¯ä»¥æ­£å¸¸è¿›å…¥åˆ™ä»£è¡¨å®Œæˆï¼Œç®¡ç†å‘˜é¡µé¢ä¸ºåŸŸå/admin\né‚®ä»¶è®¾ç½® è¿›å…¥åˆ°ä½ è®¾ç½®çš„åŸŸåï¼Œé€‰æ‹©å·¦è¾¹ä¾§è¾¹æ çš„ç”µå­é‚®ä»¶â€“\u003eç”µå­é‚®ä»¶è·¯ç”±\næ·»åŠ DNSè®°å½•\nç‚¹å‡»ç›®æ ‡åœ°å€ï¼ŒéªŒè¯ä¸€ä¸ªé‚®ç®±åœ°å€ï¼Œä¸€èˆ¬ä½¿ç”¨è‡ªå·±é‚®ç®±å°±å¥½\nç‚¹å‡»è·¯ç”±è§„åˆ™ï¼Œç¼–è¾‘ï¼Œå°†æ“ä½œæ”¹ä¸ºå‘åŠ¨åˆ°Workerï¼Œé€‰æ‹©åˆšåˆšåˆ›å»ºçš„åç«¯ï¼Œä¿å­˜\nå…¶ç”¨è¿™ä¸ªè§„åˆ™\nå†æ¬¡è®¿é—®å‰ç«¯ç•Œé¢ï¼Œæ­£å¸¸è®¿é—®åˆ™ä»£è¡¨éƒ¨ç½²æˆåŠŸ\nå‘é€é‚®ä»¶éƒ¨ç½² è®¿é—®æ³¨å†Œhttps://resend.com\né€‰æ‹©Domains\næ·»åŠ domainï¼Œå¹¶ä¸”éªŒè¯\nç‚¹å‡»æ—è¾¹çš„apiï¼Œåˆ›å»ºapiå¯†é’¥ï¼Œé€‰æ‹©å…¨æƒé™ï¼Œå¤åˆ¶å¯†é’¥\nå›åˆ°cloudflareçš„workerå’Œpagesé¡µé¢ï¼Œé€‰æ‹©åç«¯çš„workerï¼Œè¿›å…¥é¡¹ç›®\nç‚¹å‡»è®¾ç½®ï¼Œé€‰æ‹©å˜é‡ï¼Œç‚¹å‡»ç¼–è¾‘å˜é‡ï¼Œæ·»åŠ å˜é‡ï¼Œéƒ¨ç½²\nRESEND_TOKEN = ä½ çš„å¯†é’¥ Telegramæœºå™¨äººéƒ¨ç½²ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰ åˆ›å»ºä¸€ä¸ªæœºå™¨äººï¼Œåœ¨tgä¸­æœç´¢@BotFatherç”³è¯·\nè·å–åˆ°æœºå™¨äººçš„tokenï¼Œç„¶åæœç´¢@userinfobotï¼Œè·å–è‡ªå·±çš„è´¦æˆ·id\nä»¿ç…§ä¹‹å‰çš„æ­¥éª¤å†æ¬¡æ·»åŠ å˜é‡\nTELEGRAM_BOT_TOKEN = æœºå™¨äººtoken æ‰“å¼€ç³»ç»Ÿçš„ç®¡ç†å‘˜é¡µé¢ï¼šå‰ç«¯åŸŸå/adminï¼Œåœ¨æ­¤å¤„å¡«å†™ä½ çš„tgç”¨æˆ·id\nè‡³æ­¤æ‰€æœ‰åŸºç¡€é…ç½®å®Œæˆ\né™„ï¼šæ‰€æœ‰å˜é‡åç§°åŠä½œç”¨ï¼Œæ·»åŠ æ–¹å¼å¦‚ä¹‹å‰æ‰€ç¤º\n[vars] # TITLE = \"Custom Title\" # è‡ªå®šä¹‰ç½‘ç«™æ ‡é¢˜ PREFIX = \"tmp\" # è¦å¤„ç†çš„é‚®ç®±åç§°å‰ç¼€ï¼Œä¸éœ€è¦åç¼€å¯é…ç½®ä¸ºç©ºå­—ç¬¦ä¸² # å¦‚æœä½ æƒ³è¦ä½ çš„ç½‘ç«™ç§æœ‰ï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹å¯†ç  # PASSWORDS = [\"123\", \"456\"] # admin æ§åˆ¶å°å¯†ç , ä¸é…ç½®åˆ™ä¸å…è®¸è®¿é—®æ§åˆ¶å° # ADMIN_PASSWORDS = [\"123\", \"456\"] # admin è”ç³»æ–¹å¼ï¼Œä¸é…ç½®åˆ™ä¸æ˜¾ç¤ºï¼Œå¯é…ç½®ä»»æ„å­—ç¬¦ä¸² # ADMIN_CONTACT = \"xx@xx.xxx\" DOMAINS = [\"xxx.xxx1\" , \"xxx.xxx2\"] # ä½ çš„åŸŸå, æ”¯æŒå¤šä¸ªåŸŸå JWT_SECRET = \"xxx\" # ç”¨äºç”Ÿæˆ jwt çš„å¯†é’¥, jwt ç”¨äºç»™ç”¨æˆ·ç™»å½•ä»¥åŠé‰´æƒ BLACK_LIST = \"\" # é»‘åå•ï¼Œç”¨äºè¿‡æ»¤å‘ä»¶äººï¼Œé€—å·åˆ†éš” # æ˜¯å¦å…è®¸ç”¨æˆ·åˆ›å»ºé‚®ä»¶, ä¸é…ç½®åˆ™ä¸å…è®¸ ENABLE_USER_CREATE_EMAIL = true # å…è®¸ç”¨æˆ·åˆ é™¤é‚®ä»¶, ä¸é…ç½®åˆ™ä¸å…è®¸ ENABLE_USER_DELETE_EMAIL = true # å…è®¸è‡ªåŠ¨å›å¤é‚®ä»¶ ENABLE_AUTO_REPLY = false # æ˜¯å¦å¯ç”¨ webhook # ENABLE_WEBHOOK = true # å‰ç«¯ç•Œé¢é¡µè„šæ–‡æœ¬ # COPYRIGHT = \"Dream Hunter\" # é»˜è®¤å‘é€é‚®ä»¶ä½™é¢ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œå°†ä¸º 0 # DEFAULT_SEND_BALANCE = 1 # Turnstile äººæœºéªŒè¯é…ç½® # CF_TURNSTILE_SITE_KEY = \"\" # CF_TURNSTILE_SECRET_KEY = \"\" # dkim config # DKIM_SELECTOR = \"mailchannels\" # å‚è€ƒ DKIM éƒ¨åˆ† mailchannels._domainkey çš„ mailchannels # DKIM_PRIVATE_KEY = \"\" # å‚è€ƒ DKIM éƒ¨åˆ† priv_key.txt çš„å†…å®¹ # telegram bot æœ€å¤šç»‘å®šé‚®ç®±æ•°é‡ # TG_MAX_ACCOUNTS = 5 # å…¨å±€è½¬å‘åœ°å€åˆ—è¡¨ï¼Œå¦‚æœä¸é…ç½®åˆ™ä¸å¯ç”¨ï¼Œå¯ç”¨åæ‰€æœ‰é‚®ä»¶éƒ½ä¼šè½¬å‘åˆ°åˆ—è¡¨ä¸­çš„åœ°å€ # FORWARD_ADDRESS_LIST = [\"xxx@xxx.com\"] ","wordCount":"520","inLanguage":"en","image":"https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/Cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F.png","datePublished":"2024-08-05T16:36:00Z","dateModified":"2024-08-05T16:36:00Z","author":{"@type":"Person","name":"MuskZhou"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/"},"publisher":{"@type":"Organization","name":"paipaiâ€™s blog","logo":{"@type":"ImageObject","url":"https://blog.paipaiio.com/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.paipaiio.com/ accesskey=h title="paipaiâ€™s blog (Alt + H)">paipaiâ€™s blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.paipaiio.com/ title=é¦–é¡µ><span>é¦–é¡µ</span></a></li><li><a href=https://blog.paipaiio.com/posts/ title=æ–‡ç« ><span>æ–‡ç« </span></a></li><li><a href=https://blog.paipaiio.com/about/ title=å…³äº><span>å…³äº</span></a></li><li><a href=https://blog.paipaiio.com/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://blog.paipaiio.com/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://blog.paipaiio.com/categories/ title=åˆ†ç±»><span>åˆ†ç±»</span></a></li><li><a href=https://blog.paipaiio.com/search/ title=ğŸ”><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Cloudflareéƒ¨ç½²å…è´¹ä¸´æ—¶é‚®ç®±ç³»ç»Ÿ</h1><div class=post-meta><span title='2024-08-05 16:36:00 +0000 UTC'>August 5, 2024</span>&nbsp;Â·&nbsp;<span>MuskZhou</span></div></header><figure class=entry-cover><img loading=eager srcset='https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/Cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F_hu_3edff0ba77786457.png 360w,https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/Cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F_hu_8f99c3e77042b9eb.png 480w,https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/Cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F_hu_3891e12104f2cefa.png 720w,https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/Cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F_hu_7102d445a5e947af.png 1080w,https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/Cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F.png 1232w' src=https://blog.paipaiio.com/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/Cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F.png sizes="(min-width: 768px) 720px, 100vw" width=1232 height=928 alt=æ–‡ç« å°é¢å›¾></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#d1%e6%95%b0%e6%8d%ae%e5%ba%93%e9%85%8d%e7%bd%ae aria-label=D1æ•°æ®åº“é…ç½®>D1æ•°æ®åº“é…ç½®</a></li><li><a href=#%e5%90%8e%e5%8f%b0%e7%a8%8b%e5%ba%8f%e9%83%a8%e7%bd%b2 aria-label=åå°ç¨‹åºéƒ¨ç½²>åå°ç¨‹åºéƒ¨ç½²</a></li><li><a href=#%e5%89%8d%e7%ab%af%e7%a8%8b%e5%ba%8f%e9%83%a8%e7%bd%b2 aria-label=å‰ç«¯ç¨‹åºéƒ¨ç½²>å‰ç«¯ç¨‹åºéƒ¨ç½²</a></li><li><a href=#%e9%82%ae%e4%bb%b6%e8%ae%be%e7%bd%ae aria-label=é‚®ä»¶è®¾ç½®>é‚®ä»¶è®¾ç½®</a></li><li><a href=#%e5%8f%91%e9%80%81%e9%82%ae%e4%bb%b6%e9%83%a8%e7%bd%b2 aria-label=å‘é€é‚®ä»¶éƒ¨ç½²>å‘é€é‚®ä»¶éƒ¨ç½²</a></li><li><a href=#telegram%e6%9c%ba%e5%99%a8%e4%ba%ba%e9%83%a8%e7%bd%b2%e5%bc%ba%e7%83%88%e5%bb%ba%e8%ae%ae aria-label=Telegramæœºå™¨äººéƒ¨ç½²ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰>Telegramæœºå™¨äººéƒ¨ç½²ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰</a></li></ul></div></details></div><div class=post-content><blockquote><p>é¡¹ç›®åŸåœ°å€ï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email</p><p>æ¼”ç¤ºåœ°å€ï¼štm.b4.hk</p></blockquote><blockquote><p>[!NOTE]</p><p>äº‹å…ˆå‡†å¤‡å†…å®¹ï¼š</p><ol><li><p>ä¸€ä¸ªcloudflareè´¦æˆ·</p></li><li><p>ä¸¤ä¸ªåŸŸåï¼Œåˆ†åˆ«å¯¹åº”</p><p>å‰ç«¯: tm.b4.hk</p><p>åç«¯: tmapi.b4.hk</p></li></ol></blockquote><h3 id=d1æ•°æ®åº“é…ç½®>D1æ•°æ®åº“é…ç½®<a hidden class=anchor aria-hidden=true href=#d1æ•°æ®åº“é…ç½®>#</a></h3><ol><li>æ‰“å¼€Cloudflareä¸»é¡µ</li></ol><p><img alt=1 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/1.png></p><ol start=2><li>é€‰æ‹©å·¦è¾¹ä¾§æ çš„Workerså’ŒPagesï¼Œç‚¹è¿›å»</li></ol><p><img alt=2 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/2.png></p><ol start=3><li>é€‰æ‹©å·¦è¾¹ä¾§æ çš„D1ï¼Œç‚¹è¿›å»</li></ol><p><img alt=3 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/3.png></p><ol start=4><li><p>åˆ›å»ºæ•°æ®åº“ï¼Œé€‰æ‹©ä»ªè¡¨ç›˜ï¼Œåå­—å¡«dev,ç„¶åç‚¹å‡»åˆ›å»º</p><p><img alt=4 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/4.png></p></li><li><p>é€‰æ‹©æ§åˆ¶å°</p><p><img alt=5 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/5.png></p></li><li><p>åœ¨å‘½ä»¤è¡Œå¤„è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡Œï¼Œå‡ºç°ä¸€ä¸‹æç¤ºè¯´æ˜å·²ç»å®Œæˆ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>CREATE TABLE IF NOT EXISTS raw_mails (
</span></span><span class=line><span class=cl>    id INTEGER PRIMARY KEY,
</span></span><span class=line><span class=cl>    message_id TEXT,
</span></span><span class=line><span class=cl>    source TEXT,
</span></span><span class=line><span class=cl>    address TEXT,
</span></span><span class=line><span class=cl>    raw TEXT,
</span></span><span class=line><span class=cl>    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl>);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE INDEX IF NOT EXISTS idx_raw_mails_address ON raw_mails(address);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE TABLE IF NOT EXISTS address (
</span></span><span class=line><span class=cl>    id INTEGER PRIMARY KEY,
</span></span><span class=line><span class=cl>    name TEXT UNIQUE,
</span></span><span class=line><span class=cl>    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
</span></span><span class=line><span class=cl>    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl>);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE INDEX IF NOT EXISTS idx_address_name ON address(name);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE TABLE IF NOT EXISTS auto_reply_mails (
</span></span><span class=line><span class=cl>    id INTEGER PRIMARY KEY,
</span></span><span class=line><span class=cl>    source_prefix TEXT,
</span></span><span class=line><span class=cl>    name TEXT,
</span></span><span class=line><span class=cl>    address TEXT UNIQUE,
</span></span><span class=line><span class=cl>    subject TEXT,
</span></span><span class=line><span class=cl>    message TEXT,
</span></span><span class=line><span class=cl>    enabled INTEGER DEFAULT 1,
</span></span><span class=line><span class=cl>    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl>);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE INDEX IF NOT EXISTS idx_auto_reply_mails_address ON auto_reply_mails(address);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE TABLE IF NOT EXISTS address_sender (
</span></span><span class=line><span class=cl>    id INTEGER PRIMARY KEY,
</span></span><span class=line><span class=cl>    address TEXT UNIQUE,
</span></span><span class=line><span class=cl>    balance INTEGER DEFAULT 0,
</span></span><span class=line><span class=cl>    enabled INTEGER DEFAULT 1,
</span></span><span class=line><span class=cl>    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl>);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE INDEX IF NOT EXISTS idx_address_sender_address ON address_sender(address);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE TABLE IF NOT EXISTS sendbox (
</span></span><span class=line><span class=cl>    id INTEGER PRIMARY KEY,
</span></span><span class=line><span class=cl>    address TEXT,
</span></span><span class=line><span class=cl>    raw TEXT,
</span></span><span class=line><span class=cl>    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl>);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE INDEX IF NOT EXISTS idx_sendbox_address ON sendbox(address);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE TABLE IF NOT EXISTS settings (
</span></span><span class=line><span class=cl>    key TEXT PRIMARY KEY,
</span></span><span class=line><span class=cl>    value TEXT,
</span></span><span class=line><span class=cl>    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
</span></span><span class=line><span class=cl>    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl>);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE TABLE IF NOT EXISTS users (
</span></span><span class=line><span class=cl>    id INTEGER PRIMARY KEY,
</span></span><span class=line><span class=cl>    user_email TEXT UNIQUE NOT NULL,
</span></span><span class=line><span class=cl>    password TEXT NOT NULL,
</span></span><span class=line><span class=cl>    user_info TEXT,
</span></span><span class=line><span class=cl>    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
</span></span><span class=line><span class=cl>    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl>);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE INDEX IF NOT EXISTS idx_users_user_email ON users(user_email);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE TABLE IF NOT EXISTS users_address (
</span></span><span class=line><span class=cl>    id INTEGER PRIMARY KEY,
</span></span><span class=line><span class=cl>    user_id INTEGER,
</span></span><span class=line><span class=cl>    address_id INTEGER UNIQUE,
</span></span><span class=line><span class=cl>    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl>);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE INDEX IF NOT EXISTS idx_users_address_user_id ON users_address(user_id);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE INDEX IF NOT EXISTS idx_users_address_address_id ON users_address(address_id);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE TABLE IF NOT EXISTS user_roles (
</span></span><span class=line><span class=cl>    id INTEGER PRIMARY KEY,
</span></span><span class=line><span class=cl>    user_id INTEGER UNIQUE NOT NULL,
</span></span><span class=line><span class=cl>    role_text TEXT,
</span></span><span class=line><span class=cl>    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
</span></span><span class=line><span class=cl>    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl>);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CREATE INDEX IF NOT EXISTS idx_user_roles_user_id ON user_roles(user_id);
</span></span></code></pre></div><p>æŒ‡ä»¤æ¥æºï¼šhttps://github.com/dreamhunter2333/cloudflare_temp_email/blob/main/db/schema.sql</p><p><img alt=6 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/6.png></p></li></ol><p>è‡³æ­¤D1æ•°æ®åº“é…ç½®å®Œæˆ</p><h3 id=åå°ç¨‹åºéƒ¨ç½²>åå°ç¨‹åºéƒ¨ç½²<a hidden class=anchor aria-hidden=true href=#åå°ç¨‹åºéƒ¨ç½²>#</a></h3><ol><li><p>è¿”å›Workerså’Œpagesï¼Œé€‰æ‹©åˆ›å»º</p><p><img alt=7 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/7.png></p></li><li><p>åˆ›å»ºä¸€ä¸ªWorkersï¼Œç‚¹å‡»åˆ›å»ºä¸€ä¸ªWorkersï¼Œåå­—ä¸ºtmapiï¼Œç„¶åç‚¹å‡»éƒ¨ç½²</p><p><img alt=8 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/8.png></p></li><li><p>åœ¨æ¦‚è¿°é¡µé¢æ‰¾åˆ°åˆšåˆšåˆ›å»ºçš„Workerï¼Œç‚¹å‡»å³ä¸Šè§’çš„ç¼–è¾‘ä»£ç </p><p><img alt=9 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/9.png></p></li><li><p>ç‚¹å‡»å·¦ä¸Šè§’çš„æ–‡ä»¶å¤¹ç¬¦å·ï¼Œåˆ é™¤worker.js</p><p><img alt=10 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/10.png></p></li><li><p>ä¸‹è½½è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”ä¸Šä¼ ï¼Œå†ç‚¹å‡»å³ä¸Šè§’çš„éƒ¨ç½²</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>github</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>dreamhunter2333</span><span class=o>/</span><span class=n>cloudflare_temp_email</span><span class=o>/</span><span class=n>releases</span><span class=o>/</span><span class=n>latest</span><span class=o>/</span><span class=n>download</span><span class=o>/</span><span class=n>worker</span><span class=o>.</span><span class=n>js</span>
</span></span></code></pre></div><p><img alt=11 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/11.png></p></li><li><p>å›åˆ°æœ€å¼€å§‹çš„workerç•Œé¢ï¼Œç‚¹å‡»è®¾ç½®ï¼Œé€‰æ‹©å˜é‡ï¼Œæ·»åŠ ä»¥ä¸‹å››ä¸ªå˜é‡ï¼ŒDOMAINSå¡«å†™é¡¶çº§åŸŸåï¼Œç„¶åç‚¹å‡»éƒ¨ç½²</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ADMIN_PASSWORDS = [&#34;1234&#34;]
</span></span><span class=line><span class=cl>PASSWORDS = [&#34;1234&#34;]
</span></span><span class=line><span class=cl>DOMAINS = [&#34;b4.hk&#34;]
</span></span><span class=line><span class=cl>JWT_SECRET =[&#34;xxxyyyzzz&#34;]
</span></span></code></pre></div><p><img alt=12 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/12.png></p><ol start=7><li><p>å¾€ä¸‹æ»‘åŠ¨ï¼Œç‚¹å‡»ä¸‹æ–¹çš„KV å‘½åç©ºé—´ç»‘å®šï¼Œé€‰æ‹©åˆ›å»ºï¼Œåç§°å¡«å†™ä¸ºtemp_mailï¼Œç‚¹å‡»æ·»åŠ </p><p><img alt=13 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/13.png></p></li></ol><p><img alt=14 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/14.png></p><ol start=8><li><p>è¿”å›Workerï¼Œç»‘å®šåˆšåˆšçš„KVï¼Œå˜é‡åç§°ä¸ºKVï¼Œå‘½åç©ºé—´ä¸ºåˆšåˆšåˆ›å»ºçš„ï¼Œç„¶åéƒ¨ç½²</p><p><img alt=15 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/15.png></p></li><li><p>ç»‘å®šD1æ•°æ®åº“ï¼Œå˜é‡åä¸ºDB</p><p><img alt=16 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/16.png></p></li><li><p>é€‰æ‹©è§¦å‘å™¨ï¼Œæ·»åŠ è‡ªå®šä¹‰åç«¯åŸŸ(tmapi.b4.hk)</p><p><img alt=17 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/17.png></p></li><li><p>å®‰å…¨æ£€æŸ¥ï¼Œåˆ†åˆ«è®¿é—®tmapi.b4.hkå’Œtmapi.b4.hk/health_checkï¼Œè¿”å›ç»“æ„ä¸ºokåˆ™ä»£è¡¨å®Œæˆã€‚</p><p><img alt=18 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/18.png></p></li></ol><h3 id=å‰ç«¯ç¨‹åºéƒ¨ç½²>å‰ç«¯ç¨‹åºéƒ¨ç½²<a hidden class=anchor aria-hidden=true href=#å‰ç«¯ç¨‹åºéƒ¨ç½²>#</a></h3><ol><li><p>è¿”å›Workerså’Œpagesç‚¹å‡»åˆ›å»ºï¼Œé€‰æ‹©pages</p><p><img alt=19 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/19.png></p></li><li><p>ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œæ‰“å¼€ä½œè€…æä¾›çš„åœ°å€ï¼š<a href=https://temp-mail-docs.awsl.uk/zh/guide/ui/pages>é…ç½®æ–‡ä»¶ç”Ÿæˆ</a>ï¼Œåœ¨è¿™é‡Œè¾“å…¥ä½ çš„åç«¯åŸŸåï¼Œç‚¹å‡»ç”Ÿæˆï¼Œç„¶åä¸‹è½½</p><p><img alt=20 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/20.png></p></li><li><p>è¿”å›åˆšåˆšçš„åˆ›å»ºpagesï¼Œé€‰æ‹©ä¸Šä¼ èµ„äº§ï¼Œå‘½åä¸ºtempmailï¼Œç­‰å¾…å‹ç¼©åŒ…ä¸Šä¼ å®Œæˆï¼Œé€‰æ‹©éƒ¨ç½²ç«™ç‚¹</p><p><img alt=21 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/21.png></p></li><li><p>è¿›å…¥é¡¹ç›®ï¼Œç‚¹å‡»è‡ªå®šä¹‰åŸŸï¼Œæ·»åŠ è‡ªå·±çš„å‰ç«¯åŸŸ(tm.b4.hk)ï¼Œç‚¹å‡»ç»§ç»­ï¼Œç„¶åæ¿€æ´»åŸŸ</p><p><img alt=22 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/22.png></p></li><li><p>è®¿é—®å‰ç«¯åŸŸåï¼Œè¾“å…¥å¯†ç 1234ï¼Œå¯ä»¥æ­£å¸¸è¿›å…¥åˆ™ä»£è¡¨å®Œæˆï¼Œç®¡ç†å‘˜é¡µé¢ä¸ºåŸŸå/admin</p><p><img alt=23 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/23.png></p></li></ol><h3 id=é‚®ä»¶è®¾ç½®>é‚®ä»¶è®¾ç½®<a hidden class=anchor aria-hidden=true href=#é‚®ä»¶è®¾ç½®>#</a></h3><ol><li><p>è¿›å…¥åˆ°ä½ è®¾ç½®çš„åŸŸåï¼Œé€‰æ‹©å·¦è¾¹ä¾§è¾¹æ çš„ç”µå­é‚®ä»¶&ndash;>ç”µå­é‚®ä»¶è·¯ç”±</p><p><img alt=24 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/24.png></p></li><li><p>æ·»åŠ DNSè®°å½•</p><p><img alt=25 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/25.png></p></li><li><p>ç‚¹å‡»ç›®æ ‡åœ°å€ï¼ŒéªŒè¯ä¸€ä¸ªé‚®ç®±åœ°å€ï¼Œä¸€èˆ¬ä½¿ç”¨è‡ªå·±é‚®ç®±å°±å¥½</p><p><img alt=26 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/26.png></p></li><li><p>ç‚¹å‡»è·¯ç”±è§„åˆ™ï¼Œç¼–è¾‘ï¼Œå°†æ“ä½œæ”¹ä¸ºå‘åŠ¨åˆ°Workerï¼Œé€‰æ‹©åˆšåˆšåˆ›å»ºçš„åç«¯ï¼Œä¿å­˜</p><p><img alt=27 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/27.png></p></li><li><p>å…¶ç”¨è¿™ä¸ªè§„åˆ™</p><p><img alt=28 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/28.png></p></li><li><p>å†æ¬¡è®¿é—®å‰ç«¯ç•Œé¢ï¼Œæ­£å¸¸è®¿é—®åˆ™ä»£è¡¨éƒ¨ç½²æˆåŠŸ</p></li></ol><h3 id=å‘é€é‚®ä»¶éƒ¨ç½²>å‘é€é‚®ä»¶éƒ¨ç½²<a hidden class=anchor aria-hidden=true href=#å‘é€é‚®ä»¶éƒ¨ç½²>#</a></h3><ol><li><p>è®¿é—®æ³¨å†Œhttps://resend.com</p></li><li><p>é€‰æ‹©Domains</p><p><img alt=29 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/29.png></p></li><li><p>æ·»åŠ domainï¼Œå¹¶ä¸”éªŒè¯</p><p><img alt=30 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/30.png></p></li><li><p>ç‚¹å‡»æ—è¾¹çš„apiï¼Œåˆ›å»ºapiå¯†é’¥ï¼Œé€‰æ‹©å…¨æƒé™ï¼Œå¤åˆ¶å¯†é’¥</p><p><img alt=31 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/31.png></p></li><li><p>å›åˆ°cloudflareçš„workerå’Œpagesé¡µé¢ï¼Œé€‰æ‹©åç«¯çš„workerï¼Œè¿›å…¥é¡¹ç›®</p><p><img alt=32 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/32.png></p></li><li><p>ç‚¹å‡»è®¾ç½®ï¼Œé€‰æ‹©å˜é‡ï¼Œç‚¹å‡»ç¼–è¾‘å˜é‡ï¼Œæ·»åŠ å˜é‡ï¼Œéƒ¨ç½²</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>RESEND_TOKEN = ä½ çš„å¯†é’¥
</span></span></code></pre></div><p><img alt=33 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/33.png></p><h3 id=telegramæœºå™¨äººéƒ¨ç½²å¼ºçƒˆå»ºè®®>Telegramæœºå™¨äººéƒ¨ç½²ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰<a hidden class=anchor aria-hidden=true href=#telegramæœºå™¨äººéƒ¨ç½²å¼ºçƒˆå»ºè®®>#</a></h3><ol><li><p>åˆ›å»ºä¸€ä¸ªæœºå™¨äººï¼Œåœ¨tgä¸­æœç´¢@BotFatherç”³è¯·</p></li><li><p>è·å–åˆ°æœºå™¨äººçš„tokenï¼Œç„¶åæœç´¢@userinfobotï¼Œè·å–è‡ªå·±çš„è´¦æˆ·id</p></li><li><p>ä»¿ç…§ä¹‹å‰çš„æ­¥éª¤å†æ¬¡æ·»åŠ å˜é‡</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>TELEGRAM_BOT_TOKEN = æœºå™¨äººtoken
</span></span></code></pre></div><ol start=4><li><p>æ‰“å¼€ç³»ç»Ÿçš„ç®¡ç†å‘˜é¡µé¢ï¼šå‰ç«¯åŸŸå/adminï¼Œåœ¨æ­¤å¤„å¡«å†™ä½ çš„tgç”¨æˆ·id</p><p><img alt=34 loading=lazy src=/posts/cloudflare%E9%83%A8%E7%BD%B2%E5%85%8D%E8%B4%B9%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1%E7%B3%BB%E7%BB%9F/34.png></p></li></ol><p><strong>è‡³æ­¤æ‰€æœ‰åŸºç¡€é…ç½®å®Œæˆ</strong></p><p>é™„ï¼šæ‰€æœ‰å˜é‡åç§°åŠä½œç”¨ï¼Œæ·»åŠ æ–¹å¼å¦‚ä¹‹å‰æ‰€ç¤º</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=p>[</span><span class=n>vars</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1># TITLE = &#34;Custom Title&#34; # è‡ªå®šä¹‰ç½‘ç«™æ ‡é¢˜</span>
</span></span><span class=line><span class=cl><span class=n>PREFIX</span> <span class=o>=</span> <span class=s2>&#34;tmp&#34;</span> <span class=c1># è¦å¤„ç†çš„é‚®ç®±åç§°å‰ç¼€ï¼Œä¸éœ€è¦åç¼€å¯é…ç½®ä¸ºç©ºå­—ç¬¦ä¸²</span>
</span></span><span class=line><span class=cl><span class=c1># å¦‚æœä½ æƒ³è¦ä½ çš„ç½‘ç«™ç§æœ‰ï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹å¯†ç </span>
</span></span><span class=line><span class=cl><span class=c1># PASSWORDS = [&#34;123&#34;, &#34;456&#34;]</span>
</span></span><span class=line><span class=cl><span class=c1># admin æ§åˆ¶å°å¯†ç , ä¸é…ç½®åˆ™ä¸å…è®¸è®¿é—®æ§åˆ¶å°</span>
</span></span><span class=line><span class=cl><span class=c1># ADMIN_PASSWORDS = [&#34;123&#34;, &#34;456&#34;]</span>
</span></span><span class=line><span class=cl><span class=c1># admin è”ç³»æ–¹å¼ï¼Œä¸é…ç½®åˆ™ä¸æ˜¾ç¤ºï¼Œå¯é…ç½®ä»»æ„å­—ç¬¦ä¸²</span>
</span></span><span class=line><span class=cl><span class=c1># ADMIN_CONTACT = &#34;xx@xx.xxx&#34;</span>
</span></span><span class=line><span class=cl><span class=n>DOMAINS</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;xxx.xxx1&#34;</span> <span class=p>,</span> <span class=s2>&#34;xxx.xxx2&#34;</span><span class=p>]</span> <span class=c1># ä½ çš„åŸŸå, æ”¯æŒå¤šä¸ªåŸŸå</span>
</span></span><span class=line><span class=cl><span class=n>JWT_SECRET</span> <span class=o>=</span> <span class=s2>&#34;xxx&#34;</span> <span class=c1># ç”¨äºç”Ÿæˆ jwt çš„å¯†é’¥, jwt ç”¨äºç»™ç”¨æˆ·ç™»å½•ä»¥åŠé‰´æƒ</span>
</span></span><span class=line><span class=cl><span class=n>BLACK_LIST</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=c1># é»‘åå•ï¼Œç”¨äºè¿‡æ»¤å‘ä»¶äººï¼Œé€—å·åˆ†éš”</span>
</span></span><span class=line><span class=cl><span class=c1># æ˜¯å¦å…è®¸ç”¨æˆ·åˆ›å»ºé‚®ä»¶, ä¸é…ç½®åˆ™ä¸å…è®¸</span>
</span></span><span class=line><span class=cl><span class=n>ENABLE_USER_CREATE_EMAIL</span> <span class=o>=</span> <span class=bp>true</span>
</span></span><span class=line><span class=cl><span class=c1># å…è®¸ç”¨æˆ·åˆ é™¤é‚®ä»¶, ä¸é…ç½®åˆ™ä¸å…è®¸</span>
</span></span><span class=line><span class=cl><span class=n>ENABLE_USER_DELETE_EMAIL</span> <span class=o>=</span> <span class=bp>true</span>
</span></span><span class=line><span class=cl><span class=c1># å…è®¸è‡ªåŠ¨å›å¤é‚®ä»¶</span>
</span></span><span class=line><span class=cl><span class=n>ENABLE_AUTO_REPLY</span> <span class=o>=</span> <span class=bp>false</span>
</span></span><span class=line><span class=cl><span class=c1># æ˜¯å¦å¯ç”¨ webhook</span>
</span></span><span class=line><span class=cl><span class=c1># ENABLE_WEBHOOK = true</span>
</span></span><span class=line><span class=cl><span class=c1># å‰ç«¯ç•Œé¢é¡µè„šæ–‡æœ¬</span>
</span></span><span class=line><span class=cl><span class=c1># COPYRIGHT = &#34;Dream Hunter&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># é»˜è®¤å‘é€é‚®ä»¶ä½™é¢ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œå°†ä¸º 0</span>
</span></span><span class=line><span class=cl><span class=c1># DEFAULT_SEND_BALANCE = 1</span>
</span></span><span class=line><span class=cl><span class=c1># Turnstile äººæœºéªŒè¯é…ç½®</span>
</span></span><span class=line><span class=cl><span class=c1># CF_TURNSTILE_SITE_KEY = &#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># CF_TURNSTILE_SECRET_KEY = &#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># dkim config</span>
</span></span><span class=line><span class=cl><span class=c1># DKIM_SELECTOR = &#34;mailchannels&#34; # å‚è€ƒ DKIM éƒ¨åˆ† mailchannels._domainkey çš„ mailchannels</span>
</span></span><span class=line><span class=cl><span class=c1># DKIM_PRIVATE_KEY = &#34;&#34; # å‚è€ƒ DKIM éƒ¨åˆ† priv_key.txt çš„å†…å®¹</span>
</span></span><span class=line><span class=cl><span class=c1># telegram bot æœ€å¤šç»‘å®šé‚®ç®±æ•°é‡</span>
</span></span><span class=line><span class=cl><span class=c1># TG_MAX_ACCOUNTS = 5</span>
</span></span><span class=line><span class=cl><span class=c1># å…¨å±€è½¬å‘åœ°å€åˆ—è¡¨ï¼Œå¦‚æœä¸é…ç½®åˆ™ä¸å¯ç”¨ï¼Œå¯ç”¨åæ‰€æœ‰é‚®ä»¶éƒ½ä¼šè½¬å‘åˆ°åˆ—è¡¨ä¸­çš„åœ°å€</span>
</span></span><span class=line><span class=cl><span class=c1># FORWARD_ADDRESS_LIST = [&#34;xxx@xxx.com&#34;]</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.paipaiio.com/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/>æŠ€æœ¯åˆ†äº«</a></li><li><a href=https://blog.paipaiio.com/tags/%E7%99%BD%E5%AB%96/>ç™½å«–</a></li><li><a href=https://blog.paipaiio.com/tags/cloudflare/>Cloudflare</a></li></ul></footer></article><script src=https://giscus.app/client.js data-repo=paipaiio/paipaiio.github.io data-repo-id=R_kgDORI5CQg data-category=Comments data-category-id=DIC_kwDORI5CQs4C15eQ data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=transparent_dark data-lang=zh-CN crossorigin=anonymous async></script><script>const setGiscusTheme=()=>{const t=document.documentElement.classList.contains("dark")?"transparent_dark":"light",e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")};window.addEventListener("message",setGiscusTheme)</script></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg></a><footer class=footer><span>Copyright Â© 2026 paipaiNetWork & Made by MuskZhou</span></footer><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>